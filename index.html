<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>PDF Pro Tools</title>

<style>
body {
  font-family: Arial, sans-serif;
  background:#f4f6f9;
  margin:0;
  padding:20px;
}
.container {
  max-width:900px;
  margin:auto;
  background:#fff;
  padding:20px;
  border-radius:10px;
  box-shadow:0 10px 30px rgba(0,0,0,0.1);
}
h1 { text-align:center; }
.tool {
  border:1px dashed #ccc;
  padding:20px;
  margin:20px 0;
  border-radius:8px;
}
button {
  padding:10px 18px;
  background:#1976d2;
  color:white;
  border:none;
  border-radius:6px;
  cursor:pointer;
}
button:disabled {
  background:#aaa;
}
select, input[type=file] {
  margin:10px 0;
}
.loader {
  display:none;
  margin-top:10px;
}
</style>
</head>

<body>
<div class="container">
  <h1>üìÑ PDF PRO TOOLS</h1>

  <!-- COMPRESS -->
  <div class="tool">
    <h2>üóúÔ∏è Compress PDF</h2>
    <input type="file" id="compressFile" accept="application/pdf" />
    <br/>
    <select id="compressLevel">
      <option value="screen">Low Compression</option>
      <option value="ebook" selected>Medium Compression</option>
      <option value="printer">High Compression</option>
    </select>
    <br/>
    <button onclick="compressPDF()">Compress</button>
    <div class="loader" id="compressLoader">Processing...</div>
  </div>

  <!-- OCR -->
  <div class="tool">
    <h2>üîç OCR PDF</h2>
    <input type="file" id="ocrFile" accept="application/pdf" />
    <br/>
    <button onclick="ocrPDF()">Run OCR</button>
    <div class="loader" id="ocrLoader">Processing...</div>
  </div>
</div>

<script>
const API = "http://localhost:3000"; // change after deploy

function download(blob, filename) {
  const url = window.URL.createObjectURL(blob);
  const a = document.createElement("a");
  a.href = url;
  a.download = filename;
  document.body.appendChild(a);
  a.click();
  a.remove();
}

async function compressPDF() {
  const file = document.getElementById("compressFile").files[0];
  if (!file) return alert("Select PDF first");

  if (file.size > 25 * 1024 * 1024) {
    return alert("Max 25MB allowed");
  }

  document.getElementById("compressLoader").style.display = "block";

  const fd = new FormData();
  fd.append("file", file);
  fd.append("level", document.getElementById("compressLevel").value);

  const res = await fetch(API + "/compress", {
    method: "POST",
    body: fd
  });

  document.getElementById("compressLoader").style.display = "none";

  if (!res.ok) return alert("Compression failed");

  const blob = await res.blob();
  download(blob, "compressed.pdf");
}

async function ocrPDF() {
  const file = document.getElementById("ocrFile").files[0];
  if (!file) return alert("Select PDF first");

  document.getElementById("ocrLoader").style.display = "block";

  const fd = new FormData();
  fd.append("file", file);

  const res = await fetch(API + "/ocr", {
    method: "POST",
    body: fd
  });

  document.getElementById("ocrLoader").style.display = "none";

  if (!res.ok) return alert("OCR failed");

  const blob = await res.blob();
  download(blob, "ocr.pdf");
}
</script>
</body>
</html>
